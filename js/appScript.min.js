$(function(){$("[data-role=panel]").panel();$("[data-role=panel]").listview();$("[data-role=panel]").trigger("create"),function(n){var p=GetRootUrl(),e=p+"api/",w=e+"Reports/GetPlayerMatchSummaryData/",b=e+"Reports/GetPlayerMatchDetailData/",k=e+"Reports/GetPlayerTestDetailData/",f=0,c=-1,t={},r={Idle:0,Active:1,Submitted:2,ReadOnly:3},s={Unknow:0,Male:1,Female:2},o={MatchSummary:0,MatchDetail:1,TestDetail:2},l={Global:0,Game:1},u=r.Idle,d=10,h=undefined,g=3,a=!1,v=5,y=new Date("1/1/2001");n.init=function(){n.bindings()};n.bindings=function(){$(document).on("ready",function(){$(function(){$("body").data("env")=="production"&&(console.log=function(){})});h=undefined;QryStr("code")!=undefined&&QryStr("code")!=""&&(h=decodeURI(QryStr("code")));h==undefined&&n.SetHomePageInitialDisplay();n.BindPageStaticEvents("misc");n.BindPageStaticEvents("#question");n.BindPageStaticEvents("#summary");h!=undefined&&(n.SetHomePageStyle(!1),n.GetGamePlayServer(h));n.AdjustPagePaddingTop()});$(window).resize(function(){n.SetHeaderImage()})};n.SetHomePageInitialDisplay=function(){console.log("func app.SetHomePageInitialDisplay w:"+$(window).width()+" h:"+$(window).height());gamePlayListQueue=n.GetGamePlayListQueueLocalStorage();n.SetHeaderImage();u==r.Idle&&($("[data-icon='plus']").removeClass("ui-disabled"),$("[data-icon='minus']").addClass("ui-disabled"));n.IsGameInProgress()||gamePlayListQueue.length>0?n.HomePageInitialDisplayListview():n.HomePageInitialDisplayInstruct();n.BindPageStaticEvents("#home");$("#aboutBtn").click(function(){n.DisplayAboutPage()})};n.HomePageInitialDisplayListview=function(){console.log("func app.HomePageInitialDisplayListview");gamePlayListQueue=n.GetGamePlayListQueueLocalStorage();n.SetHomePageStyle(!1);listViewHtml="";listViewHtml+='<ul id="gameList" data-role="listview" data-split-icon="bar-chart-o" data-inset="true">';n.IsGameInProgress()?($("[data-icon='plus']").addClass("ui-disabled"),$("[data-icon='minus']").removeClass("ui-disabled"),gamePlayData=n.GetGamePlayLocalStorage(),t=n.GetResultLocalStorage(),playerName=n.GetPlayerName()!="-"?n.GetPlayerName():"(Player not named)",listViewHtml+='<li data-role="list-divider">Active Game<span class="ui-li-count">1<\/span><\/li><li data-icon="star" data-gameplay="active" data-index="-1"><a href="#"><span class="listviewGameName">'+gamePlayData.Name+'<\/span><p class="listviewPlayerName">'+playerName+"<\/p><\/a><\/li>"):n.IsGamesInQueue(r.Active)?($("[data-icon='plus']").addClass("ui-disabled"),$("[data-icon='minus']").removeClass("ui-disabled"),index=n.GetActiveGameIndexInQueue(),listViewHtml+='<li data-role="list-divider">Active Game<span class="ui-li-count">1<\/span><\/li><li data-icon="star" data-gameplay="active" data-index="'+n.GetActiveGameIndexInQueue()+'"><a href="#"><span class="listviewGameName">'+gamePlayListQueue[index].Name+'<\/span><p class="listviewPlayerName">'+gamePlayListQueue[index].FirstName+"-"+gamePlayListQueue[index].NickName+"<\/p><\/a><\/li>"):listViewHtml+='<li data-role="list-divider">No Active Game<span class="ui-li-count">0<\/span><\/li>';n.IsGamesInQueue(r.Submitted)&&(listViewHtml+='<li data-role="list-divider">Submitted Games<span class="ui-li-count">'+n.GetNbrGamesInQueue(r.Submitted)+"<\/span><\/li>");gamePlayListQueue.forEach(function(n,t){n.GameState==r.Submitted&&(listViewHtml+='<li data-icon="bar-chart-o" data-gameplay="submitted" data-index="'+t+'" data-gameplayid="'+n.GamePlayId+'"><a href="#" class="gameResumeAction"  data-index="'+t+'"><span class="listviewGameName">'+n.Name+'<\/span><br/><span class="listviewPlayerName">'+n.FirstName+"-"+n.NickName+'<\/span><\/a><a href="#" class="gameReportAction"  data-index="'+t+'"><\/a>',"<\/li>")});listViewHtml+="<\/ul>";$("#homePageContent").html(listViewHtml);$("#homePageContent").css("color","black");$("#gameList").listview().listview("refresh").trigger("create")};n.HomePageInitialDisplayInstruct=function(){console.log("func app.HomePageInitialDisplayInstruct");n.SetHomePageStyle(!0);gameInstructions='<h3 style="text-align: center">Welcome to <i>In Common<\/i>!<\/h3><p>You will need a game code from a game organizer to play. Try the <a id="demoGameLink" data-democode="Practice Match" href="#">practice game<\/a> if you don\'t have a code yet.<\/p><p>To enter a code, click the Add icon on the top bar. <i>In Common<\/i> may take a few moments to retrieve your game.<\/p><p>Enter your first name and a nickname to be recognized. Answer each of questions and click submit. Your game organizer will provide you with access to the game results.<\/p><div class="AboutButtonDiv"><button id="aboutBtn" class="ui-btn ui-corner-all" data-icon="book">Want to Know More?<\/button><\/div>';$("#homePageContent").html(gameInstructions);$("#homePageContent").css("color","#000000");$("#homePageContent").css("font-size","1.2em");$("#homePageContent").css("font-weight","bold");$("#home").trigger("create");$("#demoGameLink").click(function(){n.SetHomePageStyle(!1);n.GetGamePlayServer($(this).attr("data-democode"))})};n.SetGamePlayCodePrompt=function(){console.log("func app.SetGamePlayCodePrompt");promptforCodeHtml='<div style="margin-top: 10px"><label for="code" style="font-size: 1.2em; font-weight: bolder">Game Code<\/label><input name="code" id="gameCode" type="text" value="" data-clear-btn="true"><table><tr><td><button id="callGetPlays" class="ui-btn" data-icon="action">Find Game<\/button><\/td><td><button id="cancelGamePlay" class="ui-btn" data-icon="action">Cancel<\/button><\/td><\/tr><\/table><\/div>';$("#homePageContent").html(promptforCodeHtml);$("#homePageContent").trigger("create");$("#callGetPlays").click(function(){gameCode=$("#gameCode").val();gameCode.length>0?$("#gameCode").val()=="incommon-settings"?n.popUpHelper("Info","screen width = "+$(window).width()+"<\/br>screen height = "+$(window).height()+"<\/br>browser = "+navigator.userAgent,null):$("#gameCode").val().indexOf("incommon-ping-")!=-1?(pingInterval=parseInt($("#gameCode").val().substr(14,$("#gameCode").val().length))*1e3,console.log("Ping of In Common Server starting - ping interval: "+pingInterval),setInterval(function(){n.PingInCommonServer()},pingInterval)):n.GetGamePlayServer($("#gameCode").val()):n.popUpHelper("Error","The game code cannot be blank.","Please enter a game code.")});$("#cancelGamePlay").click(function(){n.CancelGame()});$("#gameCode").focus()};n.PingInCommonServer=function(){console.log("Ping Date: "+new Date);n.GetGamePlayStatusServer("Practice Match")};n.GetGamePlayServer=function(t){console.log("func app.GetGamePlayServer MNS");$.mobile.loading("show");url=e+"GamePlays/GetGamePlay/"+t;console.log("func app.GetGamePlayServer AJAX url:"+url);$.getJSON(url).done(function(t){if(console.log("return GetGamePlay success"),t.errorid==undefined)url=e+"GameConfigurations/GetGameConfiguration/"+t.Code,console.log("func app.GetGamePlayServer AJAX url:"+url),$.getJSON(url).done(function(i){console.log("return GetGameConfiguration success");$.mobile.loading("hide");n.PutGameConfigLocalStorage(i);(i={})?n.IsGameSubmitted(t.Id)&&$.parseJSON(n.GetConfigValue(l.Game,"DeviceCanPlayGameOnlyOnce"))?n.popUpHelper("Error","Game '"+t.Name+"' has already been submitted.","A device cannot submit the same game twice for this game type."):(n.InitalizeGamePlay(t),n.SetGamePlayPlayerPrompt()):n.popUpHelper("Error","Configuration could not be found for Game '"+t.Name+"'",null)}).fail(function(t,i,r){console.log("return GetGameConfiguration fail");$.mobile.loading("hide");n.popUpHelper("Error",n.GetAJAXFailureErrMessage("Get Game Play Config",i,r),null)});else{$.mobile.loading("hide");errorMessage=t.errormessage;switch(t.errorid){case 1:errorMessage="There is no game found for the code entered.";break;case 2:errorMessage="The game found for the entered code is no longer active.";break;default:errorMessage=t.errormessage}n.popUpHelper("Error",errorMessage,"Please enter the correct code.")}}).fail(function(t,i,r){console.log("return GetGamePlay fail");$.mobile.loading("hide");n.popUpHelper("Error",n.GetAJAXFailureErrMessage("Get Game Play",i,r),null)})};n.GetGamePlayStatusServer=function(i){console.log("func app.GetGamePlayStatusServer");var o=!1,f=0,u=!0,r="";do r="",f++,console.log("func app.GetGamePlayStatusServer ajax try:"+f),url=e+"GamePlays/GetGamePlayByCode/"+i,console.log("func app.GetGamePlayStatusServer AJAX url:"+url),n.ajaxHelper(url,"GET",null).done(function(i){if(console.log("return GetGamePlayStatus success"),i.errorid==undefined)t=n.GetResultLocalStorage(t),o=i.ClientReportAccess,t.ClientReportAccess=i.ClientReportAccess,t.PlayerCount=i.PlayerCount,n.PutResultLocalStorage(t),u=!0;else{r=i.errormessage;switch(i.errorid){case 1:r="There is no game found for the id entered.";break;default:r=i.errormessage}u=!1}}).fail(function(t,i,f){console.log("return GetGamePlayStatus fail");r=n.GetAJAXFailureErrMessage("Get Game Play Status",i,f);u=!1});while(!u&&f<g);if(r=="")return o;throw r;};n.PostGamePlayAnswersServer=function(){return console.log("app.PostGamePlayAnswersServer"),returnErrMsg=null,t=n.GetResultLocalStorage(),playerDTOin={},playerDTOin.GamePlayId=t.GamePlayId,playerDTOin.GameCode=t.GameCode,playerDTOin.FirstName=t.FirstName,playerDTOin.NickName=t.NickName,t.LastName!={}?playerDTOin.LastName:t.LastName,playerDTOin.Sex=t.Sex,url=e+"Players/PostPlayer",console.log("func app.PostGamePlayAnswersServer AJAX url:"+url),n.ajaxHelper(url,"POST",playerDTOin).done(function(r){if(console.log("return POSTPlayer success"),r.errorid==undefined){gamePlayData=n.GetGamePlayLocalStorage();t=n.GetResultLocalStorage();t.PlayerId=r.Id;n.PutResultLocalStorage(t);var u=[];for(i=0;i<gamePlayData.GameQuestions.length;i++)u[i]={},u[i].PlayerId=r.Id,u[i].GameCode=t.GameCode,u[i].ChoiceId=t.GameQuestions[i].SelChoiceId;url=e+"GamePlayAnswers/PostGamePlayAnswers"}else{switch(r.errorid){case 3:errorMessage="Your player name (first name - nickname) is already in use. Please enter another nickname for this game. Select the active game, modify your nickname, and resubmit";break;default:errorMessage=r.errormessage}return returnErrMsg=errorMessage}console.log("func app.PostGamePlayAnswersServer AJAX success url:"+url);n.ajaxHelper(url,"POST",u).done(function(){if(console.log("return POSTGamePlayAnswers success"),u.errorid==undefined)returnErrMsg=null;else return returnErrMsg=u.errormessage+"(Error #: "+u.errorid+")"}).fail(function(t,i,r){return console.log("return POSTGamePlayAnswers fail"),returnErrMsg=n.GetAJAXFailureErrMessage("Post GamePlay Answers",i,r)})}).fail(function(t,i,r){return console.log("return POSTPlayer fail"),returnErrMsg=n.GetAJAXFailureErrMessage("Post Player",i,r)}),returnErrMsg};n.GetInCommonConfigServer=function(){console.log("func app.GetInCommonConfigServer");$.mobile.loading("show");url=e+"GameConfigurations/GetConfiguration/incommon-code-around";console.log("func app.GetInCommonConfigServer AJAX url:"+url);$.getJSON(url).done(function(t){console.log("return GetInCommonConfigServer success");t.errorid==undefined?(n.PutInCommonConfigLocalStorage(t),aboutHtml=n.GetConfigValue(l.Global,"InCommon-About"),v=parseInt(n.GetConfigValue(l.Global,"InCommon-CacheMinutes")),$("#aboutContent").html(aboutHtml),$("#accordion").accordion({heightStyle:"content",autoHeight:!1,clearStyle:!0}),$.mobile.loading("hide")):($.mobile.loading("hide"),errorMessage=t.errormessage,n.popUpHelper("Error",errorMessage,"In Common request error occurred."))}).fail(function(t,i,r){console.log("return GetInCommonConfigServer fail");$.mobile.loading("hide");n.popUpHelper("Error",n.GetAJAXFailureErrMessage("Get InCommon Configuration",i,r),null)})};n.SetGamePlayPlayerPrompt=function(){console.log("func app.SetGamePlayPlayerPrompt");gamePlayData=n.GetGamePlayLocalStorage();t=n.GetResultLocalStorage();gameDescription="No Description";gamePlayData.Description!=null&&(gameDescription=gamePlayData.Description);promptforPlayerHtml='<div style="margin-top: 10px; font-weight:bold"><label for="gpName" style="font-size: 1.2em; font-weight: bolder">('+gamePlayData.GameType+' Game)<\/label><textarea name="gpName" id="gpName" disabled="disabled">'+gamePlayData.Name+" ("+gameDescription+')<\/textarea><label for="C" style="font-size: 1.2em; font-weight: bolder">First Name<\/label><input name="firstName" id="firstName" type="text" value="" data-clear-btn="true"><label for="nickName" style="font-size: 1.2em; font-weight: bolder">Nickname<\/label><input name="nickName" id="nickName" type="text" value="" data-clear-btn="true"><fieldset data-role="controlgroup" data-type="horizontal"><legend style="font-size: 1.2em; font-weight: bolder">Sex<\/legend><input name="sex" id="sex-male" type="radio" checked="checked" value="on"><label for="sex-male">Male<\/label><input name="sex" id="sex-female" type="radio"><label for="sex-female">Female<\/label><\/fieldset><table><tr><td><button id="startGamePlay" class="ui-btn" data-icon="action">Start Game<\/button><\/td><td><button id="cancelGamePlay" class="ui-btn" data-icon="action">Cancel<\/button><\/td><td><button id="reportGamePlay" class="ui-btn" data-icon="action">Results<\/button><\/td><\/tr><\/table><\/div>';$("#homePageContent").html(promptforPlayerHtml);$("#reportGamePlay").hide();u!=r.Idle&&($("input[name='firstName']").attr("value",t.FirstName),$("input[name='nickName']").attr("value",t.NickName),t.Sex==s.Male?($("#sex-male").attr("checked",!0),$("#sex-female").attr("checked",!1)):($("#sex-male").attr("checked",!1),$("#sex-female").attr("checked",!0)),u==r.ReadOnly?($("#firstName").attr("disabled","disabled"),$("#nickName").attr("disabled","disabled"),t.ClientReportAccess?$("#reportGamePlay").removeClass("ui-disabled"):$("#reportGamePlay").addClass("ui-disabled"),$("#reportGamePlay").show(),$("#startGamePlay").text("View Game")):$("#startGamePlay").text("Resume Game"),$("#gpName").css("color","black"),$("#firstName").css("color","black"),$("#nickName").css("color","black"));$("#homePageContent").trigger("create");u==r.ReadOnly&&$("#startGamePlay,#cancelGamePlay,#reportGamePlay").addClass("GameReadOnlyButtons");$("#firstName").focus();$('input[name="sex"]').on("change",function(){$(this).attr("id")=="sex-male"?($("#sex-male").attr("checked",!0),$("#sex-female").attr("checked",!1)):($("#sex-male").attr("checked",!1),$("#sex-female").attr("checked",!0))});$("#startGamePlay").click(function(){if(console.log("#startGamePlay event triggered"),$("#firstName").val().length<3||$("#firstName").val().length>8||$("#firstName").val().indexOf(" ")!=-1){n.popUpHelper("Error","The first name must be between 3 and 8 characters and contain no spaces.","Please enter a first name again.");return}if($("#nickName").val().length<3||$("#nickName").val().length>8||$("#nickName").val().indexOf(" ")!=-1){n.popUpHelper("Error","The nickname must be between 3 and 8 characters and contain no spaces.","Please enter a nickname again.");return}t.FirstName=$("#firstName").val();t.NickName=$("#nickName").val();t.Sex=$("#sex-male").attr("checked")=="checked"?s.Male:s.Female;n.PutResultLocalStorage(t);defaultHackWaitmsec=100;defaultHackWaitmsec=navigator.userAgent.match(/Android/i)?300:100;console.log("defaultHackWaitmsec for softkeyboardhack="+defaultHackWaitmsec);$("header, footer").css("position","absolute");console.log("removed window.scrollto");setTimeout(function(){n.StartGame(0)},defaultHackWaitmsec)});$("#cancelGamePlay").click(function(){gamePlayData=n.GetGamePlayLocalStorage();n.IsGameInProgress()?n.confirmDialog("Cancel",'You\'re about to cancel the Game <span class="popupGameName">'+gamePlayData.Name+"<\/span> that's in progress.<p>Are you sure?<\/p>",function(){n.CancelGame()}):n.CancelGame()});$("#reportGamePlay").click(function(){n.DisplayReportPage()})};n.InitalizeGamePlay=function(i){console.log("func app.InitalizeGamePlay");t.GamePlayId=i.Id;t.GameCode=i.Code;t.FirstName="";t.LastName="";t.NickName="";t.Sex=s.Male;t.GameQuestions=[];t.DirtyFlag=!0;i.GameQuestions.forEach(function(n,i){t.GameQuestions[i]={};t.GameQuestions[i].QuestionId=n.Question.$id;t.GameQuestions[i].SelChoiceId=c});n.PutGamePlayLocalStorage(i);n.PutResultLocalStorage(t)};n.CreateGamePlayTestPage=function(n){console.log("func app.CreateGamePlayTestPage");testHtml="GamePlayName:"+n.Name+"<br/>GameName:"+n.GameName+"<br/>Code:"+n.Code+"<br/>";n.GameQuestions.forEach(function(n,t){testHtml+="Question "+t+1+":"+n.Question.Text+"<br/>";n.Question.Choices.forEach(function(n,t){testHtml+="Choice "+t+1+":"+n.Text+"<br/>"})});page='<section id="testpage" data-role="page" data-title="Test Page" data-theme="a"><div data-role="header"><h1>Test Page<\/h1><\/div><article data-role="content">'+testHtml+"<\/article><\/section>";var t=$(page);t.appendTo($.mobile.pageContainer);$(":mobile-pagecontainer").pagecontainer("change",t,{transition:"none"})};n.SetQuestionPage=function(i,e){console.log("func app.SetQuestionPage");$("footer").show();gamePlayData=n.GetGamePlayLocalStorage();t=n.GetResultLocalStorage();$("#choiceListLegend").html('<span class="bodyText">Question #'+(i+1)+" of "+n.NbrQuestions()+"<\/span>");question=gamePlayData.GameQuestions[i].Question;questionText='<span class="bodyText">'+question.Text+"?<\/span>";fieldset='<fieldset data-role="controlgroup">';question.Choices.forEach(function(n){choiceText=n.Text;choiceName=n.Name;selectChoiceId=n.Id;checkedStr="";t.GameQuestions[i].SelChoiceId==selectChoiceId&&(checkedStr=" checked");fieldset+='<input name="choice" id="choice-'+selectChoiceId+'" type="radio" data-theme="a"'+checkedStr+">";fieldset+='<label for="choice-'+selectChoiceId+'" data-theme="a" class="style:"color:black">'+choiceText+"<\/label>"});fieldset+="<\/fieldset>";$("#questionText").html(questionText);$("#choiceList").html(fieldset);u!=r.ReadOnly?$("input[name ='choice']").checkboxradio().checkboxradio("enable").trigger("create"):($("input[name ='choice']").checkboxradio().checkboxradio("disable").trigger("create"),$('[for^="choice-"]').css("color","black"));$('#question [data-role="controlgroup"]').css("margin",".5em 0");$("#question .ui-radio").css("margin","0");$("input[name ='choice']").on("change",function(){radioButtonSelectedID=$('input[name="choice"]:checked').attr("id");gamePlayData=n.GetGamePlayLocalStorage();t.GameQuestions[f].SelChoiceId=radioButtonSelectedID.substr(7,radioButtonSelectedID.length-6);n.PutResultLocalStorage(t);n.SetBottomNavButtons(!0,!0,!0,!0)});n.SetBottomNavButtons(!0,!0,!0,!0);$(":mobile-pagecontainer").pagecontainer("change","#question",{transition:e})};n.SetSummaryPage=function(){console.log("func app.SetSummaryPage");$("footer").show();gamePlayData=n.GetGamePlayLocalStorage();t=n.GetResultLocalStorage();summaryText='<span class="bodyText">Questions - '+n.NbrQuestionsAnswered()+" out of "+n.NbrQuestions()+" answered<\/span>";listViewHtml='<ul data-role="listview" data-inset="true">';gamePlayData.GameQuestions.forEach(function(n,i){listViewHtml+="<li"+(t.GameQuestions[i].SelChoiceId==c?' data-icon="alert" ':' data-icon="check" ')+" data-qnum="+i+'><a href="#">'+(i+1)+". "+n.Question.Text+"?<\/a><\/li>"});listViewHtml+="<\/ul>";$("#summaryText h2").html(summaryText);$("#questionList").html(listViewHtml);$("#questionList").listview().trigger("create");$("#summary article").css("overflow","hidden");$("[data-qnum]").click(function(){f=parseInt(this.attributes["data-qnum"].value);n.SetQuestionPage(f,"none")});n.SetBottomNavButtons(!1,!0,!1,!1);$(":mobile-pagecontainer").pagecontainer("change","#summary")};n.BindPageStaticEvents=function(i){console.log("func app.BindPageStaticEvents");switch(i){case"#home":$('[data-gameplay="active"]').click(function(){index=this.attributes["data-index"].value;index!=-1&&n.PopQueueGamePlays();n.ResumeGame(r.Active)});$('[data-gameplay="submitted"] .gameResumeAction').click(function(){$.mobile.loading("show");index=this.attributes["data-index"].value;setTimeout(function(){n.GameResumeAction(index)},500)});$('[data-gameplay="submitted"] .gameReportAction').click(function(){$.mobile.loading("show");index=this.attributes["data-index"].value;setTimeout(function(){n.GameReportAction(index)},500)});break;case"#question":$(".backButton").click(function(){f==0?f=t.GameQuestions.length-1:f--;n.SetQuestionPage(f,"none")});$(".summaryButton").click(function(){n.SetSummaryPage()});$(".nextButton").click(function(){f==t.GameQuestions.length-1?f=0:f++;n.SetQuestionPage(f,"none")});break;case"#summary":$(".submitButton").click(function(){n.confirmDialog("Submit",'You\'re about to submit the Game <span class="popupGameName">'+gamePlayData.Name+"<\/span>.<p>Are you sure?<\/p>",function(){$.mobile.loading("show");setTimeout(function(){n.ConfirmSubmit()},1e3)})});break;case"misc":$('[data-icon="home"]').click(function(){$("#menu").panel("close");n.SetHomePageStyle(!1);n.SetHomePageInitialDisplay();$(":mobile-pagecontainer").pagecontainer("change","#home")});$("[data-icon='plus'],#newGame").click(function(){n.GameAddAction()});$("[data-icon='minus']").click(function(){if(n.IsGameInProgress()||n.IsGamesInQueue(r.Active))n.IsGamesInQueue(r.Active)&&n.PopQueueGamePlays(),gamePlayData=n.GetGamePlayLocalStorage(),t=n.GetResultLocalStorage(),n.confirmDialog("Cancel",'You\'re about to cancel the Game <span class="popupGameName">'+gamePlayData.Name+" ("+t.FirstName+"-"+t.NickName+")<\/span> that's in progress.<p>Are you sure?<\/p>",function(){n.CancelGame()});else{n.popUpHelper("Error","There's no Game in progress",null);return}});$("[data-icon='book']").click(function(){n.DisplayAboutPage()})}};n.GameAddAction=function(){if(console.log("func app.GameAddAction"),$("#menu").panel("close"),n.IsGameInProgress()){gamePlayData=n.GetGamePlayLocalStorage();n.popUpHelper("Error","Game '"+gamePlayData.Name+"' is in progress","You must cancel this game first to start a new game.");return}if(n.IsGamesInQueue(r.Active)){gamePlayListQueue=n.GetGamePlayListQueueLocalStorage();index=n.GetActiveGameIndexInQueue();n.popUpHelper("Error","Game '"+gamePlayListQueue[index].Name+"' is in progress","You must cancel this game first to start a new game.");return}$("[data-icon='plus']").addClass("ui-disabled");$("[data-icon='minus']").removeClass("ui-disabled");n.SetHomePageStyle(!1);n.SetGamePlayCodePrompt();u=r.Idle;$(":mobile-pagecontainer").pagecontainer("change","#home")};n.GameResumeAction=function(t){console.log("func app.GameResumeAction");gamePlayQueueBeforPush=n.GetGamePlayQueueLocalStorage();gamePlayDataBeforePush=gamePlayQueueBeforPush[t].GamePlay;resultBeforePush=gamePlayQueueBeforPush[t].Result;n.IsGameInProgress()&&n.PushQueueGamePlays(r.Active);n.PutGamePlayLocalStorage(gamePlayDataBeforePush);n.PutResultLocalStorage(resultBeforePush);try{n.GetGamePlayStatusServer(resultBeforePush.GameCode);$.mobile.loading("hide")}catch(i){$.mobile.loading("hide");n.popUpHelper("Error","GetGamePlayStatusServer: "+i)}u=r.ReadOnly;n.SetHomePageStyle(!1);n.ResumeGame(r.ReadOnly);$.mobile.loading("hide")};n.GameReportAction=function(t){console.log("func app.GameReportAction");gamePlayQueueBeforPush=n.GetGamePlayQueueLocalStorage();gamePlayDataBeforePush=gamePlayQueueBeforPush[t].GamePlay;resultBeforePush=gamePlayQueueBeforPush[t].Result;n.IsGameInProgress()&&n.PushQueueGamePlays(r.Active);n.PutGamePlayLocalStorage(gamePlayDataBeforePush);n.PutResultLocalStorage(resultBeforePush);try{n.GetGamePlayStatusServer(resultBeforePush.GameCode)?($.mobile.loading("hide"),n.DisplayReportPage()):($.mobile.loading("hide"),n.popUpHelper("Info","The game organizer has not made game results accessible to the players yet."))}catch(i){$.mobile.loading("hide");n.popUpHelper("Error","GetGamePlayStatusServer: "+i)}$.mobile.loading("hide")};n.ConfirmSubmit=function(){t=n.GetResultLocalStorage();console.log("func submitButton.click - GamePlayId:"+t.GamePlayId);returnErrMsg=n.PostGamePlayAnswersServer();console.log("completed app.PostGamePlayAnswersServer");returnErrMsg==null&&(n.SubmitSuccess(),console.log("success - all done"));n.SetHomePageStyle(!1);n.SetHomePageInitialDisplay();$(":mobile-pagecontainer").pagecontainer("change","#home",{transition:"none"});$.mobile.loading("hide");returnErrMsg==null?n.popUpHelper("Info",'The submission of the Game<br/><span class="popupGameName">'+gamePlayData.Name+"<\/span><br/> was successful.",null):n.popUpHelper("Error",'The submission of the Game<br/><span class="popupGameName">'+gamePlayData.Name+"<\/span><br/> was NOT successful.<p>"+returnErrMsg+"<\/p>",null)};n.AdjustPagePaddingTop=function(){console.log("func AdjustPagePaddingTop");paddingtop="44px";paddingbottom="58px";badPaddingThreshold=30;a||$.mobile.pageContainer.pagecontainer("getActivePage").attr("id")=="home"&&parseInt($("#home").css("padding-top"))<badPaddingThreshold&&($("#home").css("padding-top",paddingtop),a=!0,console.log("change the padding to "+paddingtop))};n.SetHeaderImage=function(){width=$(window).width();height=$(window).height();height>=2560?$("header img").attr("src","./images/header/header432x40.png"):height<=2559&&height>=1912?$("header img").attr("src","./images/header/header324x40.png"):height<=1911&&height>=1600?$("header img").attr("src","./images/header/header270x40.png"):height<=1599&&height>=1180?$("header img").attr("src","./images/header/header240x40.png"):height<=1179&&height>=1024?$("header img").attr("src","./images/header/header180x40.png"):height<=1023&&height>=800?$("header img").attr("src","./images/header/header180x40.png"):height<=799&&height>=480?$("header img").attr("src","./images/header/header180x40.png"):height<=479&&height>=0&&$("header img").attr("src","./images/header/header144x40.png")};n.SetHomePageStyle=function(){console.log("func app.SetHomePageStyle");$("footer").hide();n.SetBottomNavButtons(!1,!1,!1,!1)};n.CancelGame=function(){console.log("func app.CancelGame");$("#menu").panel("close");localStorage.removeItem("GamePlay");localStorage.removeItem("Result");n.SetHomePageStyle(!0);$("#homePageContent").html("");$("#homePageContent").trigger("create");n.EnableNewGame();n.SetHomePageInitialDisplay();$(":mobile-pagecontainer").pagecontainer("change","#home",{transition:"none"})};n.EnableNewGame=function(){$("[data-icon='plus']").removeClass("ui-disabled");$("[data-icon='minus']").addClass("ui-disabled");u=r.Idle};n.StartGame=function(t){console.log("func app.StartGame");u==r.Idle?u=r.Active:u==r.ReadOnly&&(u=r.ReadOnly);f=t;n.SetQuestionPage(f,"none")};n.ResumeGame=function(t){console.log("func app.ResumeGame");u=t;n.SetGamePlayPlayerPrompt()};n.DisplayAboutPage=function(){console.log("func app.DisplayAboutPage");dateTimeToCache=new Date(y.valueOf());dateTimeToCache.setMinutes(dateTimeToCache.getMinutes()+v);var t=new Date;t>dateTimeToCache||$("#aboutContent").length==0?($(":mobile-pagecontainer").pagecontainer("change","#about",{transition:"none"}),n.GetInCommonConfigServer(),y=new Date(t.valueOf())):$(":mobile-pagecontainer").pagecontainer("change","#about",{transition:"none"})};n.LoadGoogleChartLibs=function(){var n=document.createElement("script");n.type="text/javascript";n.src="https://www.google.com/jsapi";document.getElementsByTagName("head")[0].appendChild(n);setTimeout(function(){google.load("visualization","1",{packages:["corechart","table"]})},2e3)};n.DisplayReportPage=function(){console.log("func app.DisplayReportPage");gamePlayData=n.GetGamePlayLocalStorage();t=n.GetResultLocalStorage();typeof google!="undefined"?gamePlayData.GameType=="Match"?($("footer").hide(),t.PlayerCount>=2?n.DrawReport(o.MatchSummary,t.GamePlayId,t.GameCode,t.PlayerId,0):n.popUpHelper("Info","There are not enough players that have submitted their games to report on the results. Please try again later.")):n.DrawReport(o.TestDetail,t.GamePlayId,t.GameCode,t.PlayerId,0):n.confirmDialog("Error",'Your device must be connected to display results.<br/><span style="color: #00edf0">Is your device connected now?<\/span><i> (you may have to confirm/retry a couple of times)<\/i>',function(){location.reload(!0)})};n.DrawReport=function(t,i,r,u,f){console.log("func app.DrawReport");switch(t){case o.MatchSummary:url=w+i+"/"+r+"/"+u;$(":mobile-pagecontainer").pagecontainer("change","#chartreport",{transition:"none"});console.log("func app.DrawPlayerMatchSummary AJAX url:"+url);break;case o.MatchDetail:url=b+i+"/"+r+"/"+u+"/"+f;$(":mobile-pagecontainer").pagecontainer("change","#tablereport",{transition:"none"});console.log("func app.DrawPlayerMatchDetail AJAX url:"+url);break;case o.TestDetail:url=k+i+"/"+r+"/"+u;$(":mobile-pagecontainer").pagecontainer("change","#tablereport",{transition:"none"});console.log("func app.DrawPlayerTestDetail AJAX url:"+url)}$.mobile.loading("show");$.getJSON(url).done(function(i){if(i.errorid==undefined){var r=!1;$("parent_chart_div").css("min-height:500px;height: 100%;width: 100%;margin:auto;background:#fff;text-align:center");$("chart_div").css("min-height:500px;height: 100%;width: 100%;margin:auto;background:#fff;text-align:center");switch(t){case o.MatchSummary:$(window).resize(function(){r=!0;n.RenderPlayerMatchSummary(i)});$("#chart_div").html("");n.RenderPlayerMatchSummary(i);break;case o.MatchDetail:$(window).resize(function(){r=!0;n.RenderPlayerMatchDetail(i)});$("#table_div").html("");n.RenderPlayerMatchDetail(i);break;case o.TestDetail:$(window).resize(function(){r=!0;n.RenderPlayerTestDetail(i)});$("#table_div").html("");n.RenderPlayerTestDetail(i)}$.mobile.loading("hide")}else $.mobile.loading("hide"),errorMessage="There was an In Common server connection error.",n.popUpHelper("Error",errorMessage,"Please try again.")}).fail(function(t,i,r){$.mobile.loading("hide");n.popUpHelper("Error",n.GetAJAXFailureErrMessage("Reporting",i,r),null)})};n.RenderPlayerMatchSummary=function(i){var u,r,s,h,e,f;console.log("return DrawPlayerMatchSummary AJAX success");gamePlayData=n.GetGamePlayLocalStorage();t=n.GetResultLocalStorage();selectHandler=function(){var r,u;console.log("selectHandler");r=f.getSelection()[0];r&&(u=i[r.row].Id,console.log("The player selected "+u),n.DrawReport(o.MatchDetail,t.GamePlayId,t.GameCode,t.PlayerId,u))};try{for($("#chartheader").html('<span class="reportLabel">Game :<\/span> <span class="reportLabelText">'+gamePlayData.Name+'<\/span><br/><span class="reportLabel reportLabelMargin">Player:<\/span> <span class="reportLabelText">'+n.GetPlayerName())+"<\/span>",maxTickValue=0,u=new Array(i.length+1),u[0]=new Array(4),u[0][0]="Player",u[0][1]="Matches",u[0][2]={role:"annotation"},u[0][3]={role:"style"},r=0;r<i.length;r++)u[r+1]=new Array(3),u[r+1][0]=i[r].Name,u[r+1][1]=i[r].Value,legendStr="("+i[r].Value+")",legendStr=i[r].Name+"("+i[r].Value+")",u[r+1][2]=legendStr,u[r+1][3]="color: #262626",maxTickValue=Math.max(maxTickValue,i[r].Value);s=google.visualization.arrayToDataTable(u);h="# Matches out of "+n.NbrQuestions();tickArray=GetChartAxisTickets(0,maxTickValue,4);e={};e={height:Math.round(90*i.length),chartArea:{left:10,top:25,right:10,width:"95%",height:"75%"},colors:["#262626"],hAxis:{title:h,format:"#",titleTextStyle:{fontSize:"20"},ticks:tickArray},backgroundColor:"transparent",bar:{groupWidth:"75%"},annotations:{textStyle:{fontName:"Times-Roman",fontSize:13,bold:!0,italic:!0,opacity:.8}},legend:{position:"top",alignment:"end",textStyle:{color:"black",fontSize:16}}};f=new google.visualization.BarChart($("#chart_div")[0]);google.visualization.events.addListener(f,"select",selectHandler);f.draw(s,e)}catch(c){n.popUpHelper("Error",n.GetGoogleChartFailureErrMessage("Chart Player Match Summary",c),null)}};n.RenderPlayerMatchDetail=function(i){var u,r,e,f;console.log("return DrawPlayerMatchDetail AJAX success");gamePlayData=n.GetGamePlayLocalStorage();t=n.GetResultLocalStorage();setColumnWidths=function(){$(window).width()<=900&&($('.googleReportTableHeader:contains("%")').css("width","30px"),$('.googleReportTableHeader:contains("Matchup Choice")').css("width","50px"))};try{for(i.length>=1&&$("#tableheader").html('<span class="reportLabel" style="margin-right: 20px">Game<\/span>: <span class="reportLabelText">'+gamePlayData.Name+'<\/span><br/><span class="reportLabel" style="margin-right: 17px">Player<\/span>: <span class="reportLabelText">'+i[0].PlayerName+'<\/span><br/><span class="reportLabel reportLabelMargin">Matchup:<\/span> <span class="reportLabelText">'+i[0].MatchedPlayerName)+"<\/span>",u=new google.visualization.DataTable,u.addColumn("string","Question"),u.addColumn("string","Player Choice"),u.addColumn("string","Matchup Choice"),u.addColumn("number","%"),rowlength=4,rowVector=new Array(rowlength),matchCount=0,r=0;r<i.length;r++)cellClassName="googleReportCellNOWB",i[r].Match==1?(cellClassName="googleReportCellYESWB",matchCount++):cellClassName="googleReportCellNOWB",row=0,rowVector[row++]={v:i[r].Question,p:{className:"googleReportCell"}},rowVector[row++]={v:i[r].PlayerChoice,p:{className:"googleReportCellWB"}},rowVector[row++]={v:i[r].MatchedPlayerChoice,p:{className:cellClassName}},rowVector[row++]={v:i[r].PercentChosen,p:{className:"googleReportCell"}},u.addRow(rowVector);$(".tableHeader").html(matchCount+" Matches out of "+i.length+" Questions");e={allowHtml:!0,alternatingRowStyle:!0,cssClassNames:{headerCell:"googleReportTableHeader",tableCell:"googleReportTableNonHeader",tableRow:"googleReportTableNonHeader"},backgroundColor:"transparent"};f=new google.visualization.Table(document.getElementById("table_div"));google.visualization.events.addListener(f,"ready",setColumnWidths);f.draw(u,e);n.AlignTableCellContent()}catch(o){n.popUpHelper("Error",n.GetGoogleChartFailureErrMessage("Chart Player Match Detail",o),null)}};n.RenderPlayerTestDetail=function(i){var u,r,e,f;console.log("return DrawPlayerTestDetail AJAX success");gamePlayData=n.GetGamePlayLocalStorage();t=n.GetResultLocalStorage();selectHandler=function(){var n,t;console.log("selectHandler");n=chart.getSelection()[0];n&&(t=i[n.row].QuestionId,console.log("The question selected "+t))};try{for(i.length>=1&&$("#tableheader").html('<span class="reportLabel">Game<\/span> : <span class="reportLabelText">'+gamePlayData.Name+'<\/span><br/><span class="reportLabel reportLabelMargin">Player:<\/span> <span class="reportLabelText">'+i[0].PlayerName+'<\/span> <span class="reportLabel reportLabelMargin">Score:<\/span> '+CalcTestScore(i)+"%"),u=new google.visualization.DataTable,u.addColumn("string","Question"),u.addColumn("string","Selections"),u.addColumn("string","Correct Choices"),rowlength=3,rowVector=new Array(rowlength),correctCount=0,r=0;r<i.length;r++)cellClassName="googleReportCellNOWB",i[r].QuestionCorrect==1?(cellClassName="googleReportCellYESWB",correctCount++):cellClassName="googleReportCellNOWB",row=0,rowVector[row++]={v:i[r].Question,p:{className:"googleReportCell"}},rowVector[row++]={v:i[r].SelectedChoices,p:{className:cellClassName}},rowVector[row++]={v:i[r].CorrectChoices,p:{className:"googleReportCellWB"}},u.addRow(rowVector);$(".tableHeader").html(correctCount+" Correct out of "+i.length+" Questions");e={allowHtml:!0,cssClassNames:{headerCell:"googleReportTableHeader",tableCell:"googleReportTableNonHeader",tableRow:"googleReportTableNonHeader"}};f=new google.visualization.Table(document.getElementById("table_div"));google.visualization.events.addListener(f,"select",selectHandler);f.draw(u,e);n.AlignTableCellContent()}catch(o){n.popUpHelper("Error",n.GetGoogleChartFailureErrMessage("Chart Player Test Detail",o),null)}};n.AlignTableCellContent=function(){console.log("func app.AlignTableCellContent");$(".googleReportTableHeader").css("vertical-align","top");$(".googleReportCellYES").css("vertical-align","top");$(".googleReportCellNO").css("vertical-align","top");$(".googleReportCell").css("vertical-align","top");$(".googleReportCellYESWB").css("vertical-align","top");$(".googleReportCellNOWB").css("vertical-align","top");$(".googleReportCellWB").css("vertical-align","top")};n.IsGameInProgress=function(){return console.log("func app.IsGameInProgress"),gameInProgress=!1,t=n.GetResultLocalStorage(),t!={}&&t.DirtyFlag&&(gameInProgress=!0),gameInProgress};n.GetPlayerName=function(){return t=n.GetResultLocalStorage(),t.FirstName+"-"+t.NickName};n.IsAllQuestionsAnswered=function(){for(console.log("func app.IsAllQuestionsAnswered"),allAnswered=!0,t=n.GetResultLocalStorage(),i=0;i<gamePlayData.GameQuestions.length;i++)if(t.GameQuestions[i].SelChoiceId==c&&(allAnswered=!1),!allAnswered)break;return allAnswered};n.NbrQuestionsAnswered=function(){for(console.log("func app.NbrQuestionsAnswered"),questionsAnswered=0,t=n.GetResultLocalStorage(),i=0;i<gamePlayData.GameQuestions.length;i++)t.GameQuestions[i].SelChoiceId!=c&&questionsAnswered++;return questionsAnswered};n.NbrQuestions=function(){return console.log("func app.NbrQuestions"),t=n.GetResultLocalStorage(),t.GameQuestions.length};n.PushQueueGamePlays=function(i){console.log("func app.PushQueueGamePlays");gamePlayData=n.GetGamePlayLocalStorage();t=n.GetResultLocalStorage();gamePlayQueue=n.GetGamePlayQueueLocalStorage();gamePlayListQueue=n.GetGamePlayListQueueLocalStorage();queueNbrStart=Math.min(gamePlayQueue.length-1,d-2);for(var r=queueNbrStart;r>=0;r--)gamePlayListQueue[r+1]={},gamePlayQueue[r+1]={},gamePlayListQueue[r+1]=gamePlayListQueue[r],gamePlayQueue[r+1]=gamePlayQueue[r];gamePlayListQueue[0]={};gamePlayQueue[0]={};gamePlayListQueue[0].GamePlayId=t.GamePlayId;gamePlayListQueue[0].GameCode=t.GameCode;gamePlayListQueue[0].Name=gamePlayData.Name;gamePlayListQueue[0].FirstName=t.FirstName;gamePlayListQueue[0].NickName=t.NickName;gamePlayListQueue[0].GameState=i;gamePlayQueue[0].GamePlay=gamePlayData;gamePlayQueue[0].Result=t;n.PutGamePlayListQueueLocalStorage(gamePlayListQueue);n.PutGamePlayQueueLocalStorage(gamePlayQueue)};n.PopQueueGamePlays=function(){console.log("func app.PopQueueGamePlays");gamePlayQueue=n.GetGamePlayQueueLocalStorage();gamePlayListQueue=n.GetGamePlayListQueueLocalStorage();n.PutGamePlayLocalStorage(gamePlayQueue[0].GamePlay);n.PutResultLocalStorage(gamePlayQueue[0].Result);queueNbrStart=0;for(var t=queueNbrStart;t<gamePlayQueue.length-1;t++)gamePlayListQueue[t]=gamePlayListQueue[t+1],gamePlayQueue[t]=gamePlayQueue[t+1];gamePlayQueue.splice(gamePlayQueue.length-1,1);gamePlayListQueue.splice(gamePlayQueue.length-1,1);n.PutGamePlayListQueueLocalStorage(gamePlayListQueue);n.PutGamePlayQueueLocalStorage(gamePlayQueue)};n.IsGamesInQueue=function(t){for(console.log("func app.IsGamesInQueue"),returnStatus=!1,gamePlayListQueue=n.GetGamePlayListQueueLocalStorage(),i=0;i<=gamePlayListQueue.length-1;i++)if(gamePlayListQueue[i].GameState==t&&(returnStatus=!0),returnStatus)break;return returnStatus};n.GetNbrGamesInQueue=function(t){for(console.log("func app.GetNbrGamesInQueue"),count=0,gamePlayListQueue=n.GetGamePlayListQueueLocalStorage(),i=0;i<=gamePlayListQueue.length-1;i++)gamePlayListQueue[i].GameState==t&&count++;return count};n.GetActiveGameIndexInQueue=function(){for(console.log("func app.GetActiveGameIndexInQueue"),index=-1,gamePlayListQueue=n.GetGamePlayListQueueLocalStorage(),i=0;i<=gamePlayListQueue.length-1;i++)if(gamePlayListQueue[i].GameState==r.Active&&(index=i),index!=-1)break;return index};n.IsGameSubmitted=function(t){for(console.log("func app.IsGameSubmitted"),isSubmitted=!1,gamePlayListQueue=n.GetGamePlayListQueueLocalStorage(),i=0;i<gamePlayListQueue.length;i++)if(gamePlayListQueue[i].GamePlayId==t&&(isSubmitted=!0),isSubmitted)break;return isSubmitted};n.GetAJAXFailureErrMessage=function(n,t,i){return errorDetailDescLine="",(t!="error"||i!="")&&(errorDetailDescLine="<br/>("+t+", "+i+")"),"There were connectivity issues for <i>"+n+"<\/i>."+errorDetailDescLine};n.GetGoogleChartFailureErrMessage=function(n,t){return errorDetailDescLine="",t!=""&&(errorDetailDescLine="<br/>("+t+")"),"There were connectivity issues for <i>"+n+"<\/i>."+errorDetailDescLine};n.popUpHelper=function(t,i,r){console.log("func app.popUpHelper");popupArgs=new PopupArgs;popupArgs.header=t;popupArgs.msg1=i;popupArgs.msg2=r;n.popUp(popupArgs)};n.popUp=function(n){console.log("func app.popUp");contentHtml="<table><tr><td>"+n.msg1+"<\/td><\/tr><tr><td>"+(n.msg2!=null?n.msg2:"")+"<\/tr><\/td><\/table>";$("#popMsgHeader").html(n.header);$("#popupMsgContent").html(contentHtml);$("#popupMsgYesBtn").show();$("#popupMsgYesBtn").attr("data-rel","back");$("#popupMsg").enhanceWithin().popup().popup("open",{transition:"fade"})};n.confirmDialog=function(n,t,i){var u,r;console.log("func app.confirmDialog");u="popupDialog";$('<div data-role="popup" id="'+u+'" data-confirmed="no" data-transition="fade" data-overlay-theme="a" data-theme="a" data-dismissible="false" style="max-width:500px;">                     <div data-role="header" data-theme="a">                        <h1>'+n+'<\/h1>                    <\/div>                    <div role="main" class="ui-content popupContentFontSize" data-theme="a">                        <h3 class="ui-title">'+t+'<\/h3>                        <div style="text-align:right">                        <a href="#" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-btn-a optionConfirm popupButtonFontSize" data-rel="back" data-theme="a">Yes<\/a>                        <a "href="#" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-btn-a optionCancel popupButtonFontSize" data-rel="back" data-transition="flow" data-theme="a">No<\/a>                        <div>                    <\/div>                <\/div>').appendTo($.mobile.pageContainer);r=$("#"+u);r.trigger("create");r.popup({theme:"a"}).popup({afterclose:function(n){r.find(".optionConfirm").first().off("click");var t=r.attr("data-confirmed")==="yes"?!0:!1;$(n.target).remove();t&&i&&i()}});r.popup("open");r.find(".optionConfirm").first().on("click",function(){r.attr("data-confirmed","yes")})};n.GetConfigValue=function(t,r){for(console.log("func app.GetConfigValue"),config=t==l.Game?n.GetGameConfigLocalStorage():n.GetInCommonConfigLocalStorage(),parmValue="EmptyValue",i=0;i<config.length;i++)if(config[i].Name==r&&(parmValue=config[i].Value),parmValue!="EmptyValue")break;return parmValue};n.SetBottomNavButtons=function(t,i,f,e){console.log("func app.SetBottomNavButtons");f?$(".backButton").hasClass("ui-disabled")&&$(".backButton").removeClass("ui-disabled"):$(".backButton").hasClass("ui-disabled")||$(".backButton").addClass("ui-disabled");t?$(".summaryButton").hasClass("ui-disabled")&&$(".summaryButton").removeClass("ui-disabled"):$(".summaryButton").hasClass("ui-disabled")||$(".summaryButton").addClass("ui-disabled");i&&n.IsAllQuestionsAnswered()&&u!=r.ReadOnly?$(".submitButton").hasClass("ui-disabled")&&$(".submitButton").removeClass("ui-disabled"):$(".submitButton").hasClass("ui-disabled")||$(".submitButton").addClass("ui-disabled");e?$(".nextButton").hasClass("ui-disabled")&&$(".nextButton").removeClass("ui-disabled"):$(".nextButton").hasClass("ui-disabled")||$(".nextButton").addClass("ui-disabled")};n.SubmitSuccess=function(){console.log("func app.SubmitSuccess");t=n.GetResultLocalStorage();t.DirtyFlag=!1;n.PutResultLocalStorage(t);u=r.ReadOnly;n.SetBottomNavButtons(!1,!1,!1,!1);$("[data-icon='plus']").removeClass("ui-disabled");$("[data-icon='minus']").addClass("ui-disabled");n.PushQueueGamePlays(r.Submitted)};n.CreatePlayer=function(){return console.log("func app.CreatePlayer"),gamePlayData=n.GetGamePlayLocalStorage(),t=n.GetResultLocalStorage(),t.GamePlayId=JSONdata.Id,t.FirstName="NO-NO-NO",t.LastName="NO-NO-NO",t.NickName="NO-NO-NO",t.Sex=s.Female,player={},player.FirstName=t.FirstName,player.LastName=t.LastName,player.NickName=t.NickName,player.Sex=t.Sex,player};n.PutInCommonConfigLocalStorage=function(n){localStorage.InCommon=JSON.stringify(n)};n.GetInCommonConfigLocalStorage=function(){return localResult=undefined,localStorage.InCommon!=undefined&&(localResult=JSON.parse(localStorage.InCommon)),localResult};n.PutGamePlayLocalStorage=function(n){localStorage.GamePlay=JSON.stringify(n)};n.GetGamePlayLocalStorage=function(){return localResult=undefined,localStorage.GamePlay!=undefined&&(localResult=JSON.parse(localStorage.GamePlay)),localResult};n.PutResultLocalStorage=function(n){localStorage.Result=JSON.stringify(n)};n.GetResultLocalStorage=function(){return localResult={},localStorage.Result!=undefined&&(localResult=JSON.parse(localStorage.Result)),localResult};n.PutGamePlayQueueLocalStorage=function(n){localStorage.GamePlayQueue=JSON.stringify(n)};n.GetGamePlayQueueLocalStorage=function(){return gamePlayQueue=[],localStorage.GamePlayQueue!=undefined&&(gamePlayQueue=JSON.parse(localStorage.GamePlayQueue)),gamePlayQueue};n.PutGamePlayListQueueLocalStorage=function(n){localStorage.GamePlayListQueue=JSON.stringify(n)};n.GetGamePlayListQueueLocalStorage=function(){return gamePlayListQueue=[],localStorage.GamePlayListQueue!=undefined&&(gamePlayListQueue=JSON.parse(localStorage.GamePlayListQueue)),gamePlayListQueue};n.PutGameConfigLocalStorage=function(n){localStorage.GameConfig=JSON.stringify(n)};n.GetGameConfigLocalStorage=function(){return gameConfig={},localStorage.GameConfig!=undefined&&(gameConfig=JSON.parse(localStorage.GameConfig)),gameConfig};n.ajaxHelper=function(n,t,i){return console.log("func app.ajaxHelper uri:"+n),$.ajax({type:t,async:!1,url:n,dataType:"json",contentType:"application/json",data:i?JSON.stringify(i):null})};n.init()}({})})